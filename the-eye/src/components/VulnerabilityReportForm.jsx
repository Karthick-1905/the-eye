import React, { useState } from "react";

export default function VulnerabilityReportForm({ onSwitchToIncident }) {
  const [formData, setFormData] = useState({
    contactDetails: "",
    name: "",
    affectedProducts: "",
    softwareVersion: "",
    vendorDetails: "",
    vulnerabilityDescription: "",
    reproductionSteps: "",
    otherVulnInfo: "",
    impactDescription: "",
    otherImpactInfo: "",
  });

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value,
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log("Vulnerability Report:", formData);
    // Handle form submission here
  };

  const handleReportIncident = () => {
    if (onSwitchToIncident) {
      onSwitchToIncident();
    }
  };

  return (
    <div className="vulnerability-form">
      <h2>Vulnerability Report</h2>
      <form onSubmit={handleSubmit}>
        <div className="form-row">
          <div className="form-group">
            <label htmlFor="name">What's your good name?</label>
            <input
              type="text"
              id="name"
              name="name"
              value={formData.name}
              onChange={handleChange}
              placeholder="Enter your name"
            />
          </div>

          <div className="form-group">
            <label htmlFor="contactDetails">
              Contact details (Name, Email, Phone, etc. - Optional)
            </label>
            <input
              type="text"
              id="contactDetails"
              name="contactDetails"
              value={formData.contactDetails}
              onChange={handleChange}
              placeholder="Email, phone, or other contact details"
            />
          </div>
        </div>

        <div className="form-row">
          <div className="form-group">
            <label htmlFor="affectedProducts">Product(s) affected</label>
            <input
              type="text"
              id="affectedProducts"
              name="affectedProducts"
              value={formData.affectedProducts}
              onChange={handleChange}
              placeholder="Name of affected products or systems"
            />
          </div>

          <div className="form-group">
            <label htmlFor="softwareVersion">
              Software version or model affected
            </label>
            <input
              type="text"
              id="softwareVersion"
              name="softwareVersion"
              value={formData.softwareVersion}
              onChange={handleChange}
              placeholder="e.g., v2.1.0, Model XYZ-123"
            />
          </div>
        </div>

        <div className="form-group">
          <label htmlFor="vendorDetails">Vendor details</label>
          <input
            type="text"
            id="vendorDetails"
            name="vendorDetails"
            value={formData.vendorDetails}
            onChange={handleChange}
            placeholder="Vendor or company name"
          />
        </div>

        <div className="form-group">
          <label htmlFor="vulnerabilityDescription">
            Vulnerability description and reproduction steps
          </label>
          <textarea
            id="vulnerabilityDescription"
            name="vulnerabilityDescription"
            value={formData.vulnerabilityDescription}
            onChange={handleChange}
            placeholder="Please provide a detailed description of the vulnerability and step-by-step instructions to reproduce it..."
            rows="6"
          />
        </div>

        <div className="form-group">
          <label htmlFor="impactDescription">Impact description</label>
          <textarea
            id="impactDescription"
            name="impactDescription"
            value={formData.impactDescription}
            onChange={handleChange}
            placeholder="Describe the potential impact or damage this vulnerability could cause..."
            rows="4"
          />
        </div>

        <div className="form-group">
          <label htmlFor="otherVulnInfo">Additional information</label>
          <textarea
            id="otherVulnInfo"
            name="otherVulnInfo"
            value={formData.otherVulnInfo}
            onChange={handleChange}
            placeholder="Any other relevant information, proof-of-concept code, screenshots, etc."
            rows="3"
          />
        </div>

        <div className="form-buttons">
          <button type="submit" className="btn-send">
            Send
          </button>
          <button
            type="button"
            className="btn-report"
            onClick={handleReportIncident}
          >
            Report Incident
          </button>
        </div>
      </form>
    </div>
  );
}
